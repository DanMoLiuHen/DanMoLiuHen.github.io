---
title: 计算机网络笔记
categories: learning-notes
excerpt: 如题，计算机网络笔记
hide: true
tag: markdown
---
{% note warning %}
计算机网络复习笔记
{% endnote %} 

访问信息的模型：
- 客户端-服务端，
- 对等网络模型，没有固定的客户和服务器

网络的用途：
- 信息访问
- 通信
- 电子商务
- 娱乐
- 物联网

空间距离：
- 局域网LAN（Local Area Networks），有线LAN和无线LAN，主要采用广播
- 城域网MAN(Metropolitan)，采用交换
- 广域网WAN(Wide)，采用交换
- 个域网PAN 

局域网中用到的拓扑结构：
1. 总线型（总电缆断开，整个网络瘫痪
2. 环型（总电缆断开，整个网络瘫痪
3. 星型
4. 网状


通信方式：
- 交换式通信
  - 经过交换设备转发，关键技术是路由选择，有star,ring, tree, complete等结构
- 广播式通信
  - 多台计算机共享通信线路，任一计算机发出的信息可被其他计算机接收，关键技术是通道分配，有bus,ring结构
    - 通道分配：
      - 静态分配，分时间片，控制简单，通道利用率低
      - 动态分配，各站点动态使用通道，通道利用率高，控制复杂，有集中式和分布式两种通道分配方法

交换（动态的接通或断开通信线路）方式分类：
- 电路交换：实时信息和模拟信号传输
  - 三个阶段：建立电路（物理电路），传输数据，拆除电路
  - 发送数据前建立点对点物理通路，数据传输延迟小
  - 一般采用时分复用
- 报文交换（计算机中不使用）：使用于带宽高，可靠灵活，延迟大
  - 信息以报文（逻辑上完整的信息段）为单位进行存储转发
  - 线路利用率高，中间节点缓冲大，延迟时间长
  - 使用统计复用
- 分组交换：缩短延迟，满足一般实时信息传送
  - 比报文小的信息段，可定长也可变长
  - 易于重传，可靠性高，每个分组包括原地址和目的地址；额外信息增加
  - 分为虚电路分组交换和数据包分组交换
    - 虚电路分组交换：电路交换与分组交换结合，分为建立（逻辑上的电路，选择路由），传输，拆除三个阶段，分组头不需要包含完整的地址信息

服务（层间交换信息必须遵守的规则）分类：
- 面向连接的服务，先建立连接，使用连接传输数据
- 无连接的服务，使用服务传输数据，每个包独立进行路由选择

---

服务原语：
- 请求
- 指示
- 响应
- 确认

OSI参考模型：
```
7. 应用层
6. 表示层（在5层中包含于应用层），解释交换数据的含义使用户看得懂，包括数据压缩，数据加密，数据描述
5. 会话层（在5层中包含于应用层），定义数据交换的定界
4. 传输层（只支持面向连接的通信）
3. 网络层（支持无连接和面向连接的通信）
2. 数据链路
1. 物理层
```

TCP/IP参考模型：
```
1. Host-to-Network，物理层与数据链路合称
2. Internet层（网络层，只支持无连接）
3. 传输层（支持两种通信模式）
4. 应用层
```

- 时域观：模拟信号（信号连续且光滑），数字信号（一段时间内是一个恒值，突变为另一个恒值），横轴是时间，
- 频域管：横轴是频率

---

比特率（传输速率，每秒传输二进制的位数）：
- 波特率：信号每秒改变的次数（信号在一个给定的等级停留0.001s，系统工作在1000波特）
- 信号等级：n个信号等级可以表示log2(n)个比特
`比特率=波特*log2(信号等级数量)`

计算最大传输速率：
1. 奈奎斯特定律：
  fmax是复合信号中的最高频率，采样率=2*fmax
  任意信号通过一个带宽为H的低通滤波器，每秒采样2H次就可以完整的重现该信号，信号电平分为V级，`最大传输速率=2Hlog2(V) (bps)`

2. 香农定理：
  在奈奎斯特定理基础上考虑随机噪声，用信噪比衡量随机噪声出现的大小（信号功率S与噪声功率N之比）`10log10(S/N)`，单位分贝，注意区分题目给出的是**S/N**还是**带有分贝单位的数值**
  带宽为H赫兹，信噪比为S/N的任意信道，`最大数据传输速率=Hlog2(1+S/N) (bps)`

物理层有关的传输方式：
- 通信方式：
  - 单工：信息只能单向传输
  - 半双工：信息可双向传输，但同一时刻是单向的
  - 全双工：可同时双向传输
- 连接方式：
  - 点对点，点到多点
- 位传输方式：
  - 串行，并行

物理层的传输介质：
- 双绞线：模拟传输，数字传输均可用
- 基带同轴电缆：数字传输
- 宽带同轴电缆：模拟传输
- 光纤：单模光纤（长距离），多模光纤（短距离）

物理层设备：
- 中继器：延长信号传输距离
- 集线器：类似多接口的转发器，每个接口用非屏蔽双绞线与适配器相连（连接的物理结构不是总线型，而是星型），可采用多集线器的级联结构

---

- 同步传输：接收方知道每一位信号的开始及其持续时间
- 异步传输：

使用数字信号
- 优点：价格便宜，对噪声不敏感
- 缺点：易受衰减，频率越高，衰减越厉害

常用的编码方式：
1. 不归零制码（Non-Return Zero）：低位表示“0”，高位表示“1”
2. 曼彻斯特编码（相位编码）：每一位中间从低跳高表示“0”，从高跳低表示“1”
3. 差分曼彻斯特码：每一位开始时有跳变表示“0”，无跳变表示“1”

数字数据的模拟传输三种调制技术：
1. 幅移键控法（调幅）(ASK, Amplitude-shift keying)
2. 频移键控法（调频）(FSK, Frequency-shift keying)
3. 相移键控法（调相）(PSK, Phase-shift keying)

模拟数据的数字传输（解决模拟数据数字化的问题，也称为脉冲代码调制PCM）：
1. 脉冲编码调制
2. $\delta$调制,(缺点：编码速度跟不上变化太快的信号)

多路复用技术（信道静态分配）：
1. 时分复用（TDM, time division multiplexing）：轮流工作。T1载波1.536MB/s，分成24个信道
2. 频分复用（FDM, frequency division multiplexing）：同时使用，通过频率分隔。
3. 波分复用（WDM, wavelength division multiplexing）：光纤中的频分复用
4. 码分复用（CDM, code division multiplexing）：能够提取期望信号

（信道动态分配）
多路访问协议：
- ALOHA协议
  - 纯ALOHA协议：数据发到信道若有冲突等待一段时间（随机的）后重发
  - 分槽ALOHA协议：信道分为离散的时间槽，槽长为一个帧所需的发送时间，其他与纯ALOHA相同
- 载波监听多路访问协议CSMA（Carrier Sense Multiple Access Protocols）
  - 在发送之前监听信道有无载波，有则不发；多路访问
  - 1-坚持型CSMA：发送前监听，信道空闲则发，否则监听至信道空闲再发，出现冲突等待一段时间（随机的）再开始发送过程
  - 非坚持型CSMA：发送前监听，信道空闲则发，否则等待一段时间再发，出现冲突等待一段时间（随机的）再开始发送过程。减少冲突概率，信道空闲时间增加
  - p-坚持型CSMA：适用于分槽信道，发送前监听，信道空闲以概率p发送，1-p延迟到下一时槽，信道忙则等待下一个时间槽，重新开始发送，若冲突等待一段时间（随机的）重新开始
- 带冲突检测的载波监听多路访问协议CSMA/CD
- 无冲突协议
  - 使用CSMA协议进行数据发送，检测到冲突
- 有限竞争协议
- 无线局域网协议

---

**数据链路层**（如何在有差错的线路上，进行无差错传输）：从网络层获取数据包（分组）把数据包封装成帧
在网络层的分组没有长度限制，确认和重传比较麻烦
为网络层提供三种服务：
- 无确认无连接服务，源机器向目标机器发送独立的帧，目标机器不对这些帧确认，适用于实时业务，错误恢复留给上层（不检测丢帧现象）
- 有确认无连接服务，未使用逻辑连接，发送的每一帧都要单独确认，适用于不可靠的信道（无线系统）
- 有确认有连接服务，三个阶段建立，传输，释放

完成的功能有：
- 向网络层提供接口
- 处理传输错误
- 调节数据流（确保慢的一方不会被快速发送的一方淹没）
- 组帧

组帧的方法：
- 字符计数法：计数出错后本帧及之后的帧都有影响（目标方不知道下一帧从哪开始）
- 带字符填充的字符定界法：使用标志字节（flag byte）作为起始和结束分界字符，如果在数据中有标志字节，通过字符（字节）填充在之前插入一个转义字符，缺点是依赖于8位字符
- 带位填充的标记定界法：转换密度小，USB采用该方法，一帧的长度取决于数据内容
- 物理层编码违例法：适用于物理层编码有冗余的网络，容易找到帧的开始和结束，不需要填充数据

---

差错出现的特点：随机，连续突发
处理方法：
- 纠错码：在数据块中添加冗余信息使得接收方能够判断数据是否有错，并**纠正错误**
  - 海明距离（两个码字之间不同的对应比特位数目,0000000000与0000011111的海明距离为5）
  - 广泛应用于无线链路
- 检错码：在数据块中添加冗余信息使得接收方能够判断数据是否有错，但**不能判断错在哪**，纠错码适用于无法重传的情况
  - 循环冗余校验码（CRC，Cyclic Redundancy Check）：发送T(x)，接收`T(x)+E(x)`,`E(x)≠0`，若`(T(x)+E(x))%G(x)=0`（由于T(x)/G(x)一般是0，所以只需要看E(x)/G(x)是否为0）不会发现差错，否则可发现（有四个国际标准*生产多项式*）
  - CRC的详细过程：
    - 假设：生成多项式为G(x)，r次冪 (r+ 1位)；信息多项式M(x)
    - 发送端：在帧的低位端加上r个0位，传送T(x)=xrM(x) – R(x)，其中R(x)为余数xrM(x)/G(x)的余数
  - 铜线和光纤上应用

注：加减法等同于异或

---

物理层与数据链路层在个特殊的IO电路中的一个处理器上运行，网络层在主CPU上运行

滑动窗口协议：捎带（延迟待发确认，与下一个待发数据帧一起发送），可在实际环境下工作，可以充分利用信道带宽，但等待时间的确认复杂。在接收到确认之前窗口大小不变。
- 一比特滑动窗口协议（停等协议）：窗口大小为1，传输效率低
  - 信道带宽`b`比特/s，帧长度`L`比特，往返传输延迟`R`秒则利用率为$\frac{L/b}{L/b+R}$，采用管道化技术发送多帧后再等待确认，但误码率将升高
- 退后n帧重传（go back n）：接收端不需要缓冲区，即接收窗口为1，如果之前的确认失败，将不动等待超时，但会造成不必要的重传，发送窗口尺寸<序号个数，累计确认只要发送了3，表示123三个序号都已确认
- 选择重传（SR）：无不必要的重传，接收端需要缓冲区。发送窗口<=接收窗口，接收窗口的最大值（maxseq+1）/2；发送窗口>接收窗口时，发送窗口+接收窗口<=序号个数，不具有累计确认的作用

常用的数据链路层协议
- 级数据链路控制规程，HDLC（High Level Data Link Control）
  - 帧类型：信息帧，监控帧，无序号帧
- X.25 LAP(Link Access Procedure),LAPB(Balanced)是HDLC的子集，面向比特
- PPP（Point to Point），面向字节，完善了SLIP协议，包括LCP（链路控制协议，Link Control Protocol）和NCP（网络控制协议，Network Control Protocol）（包含了物理层和网络层内容）