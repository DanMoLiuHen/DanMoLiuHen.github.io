

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon-ye1.png">
  <link rel="icon" href="/img/favicon-ye2.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="YeBao">
  <meta name="keywords" content="">
  
    <meta name="description" content="如题，912计算机网络笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络笔记">
<meta property="og:url" content="https://danmoliuhen.github.io./2023/06/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="YeBao&#39;blog">
<meta property="og:description" content="如题，912计算机网络笔记">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-06-26T16:07:25.178Z">
<meta property="article:modified_time" content="2023-09-07T01:59:26.041Z">
<meta property="article:author" content="YeBao">
<meta property="article:tag" content="markdown">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>计算机网络笔记 - YeBao&#39;blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"danmoliuhen.github.io.","root":"/","version":"1.9.3","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>CaiYe</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/2.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="计算机网络笔记"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-06-27 00:07" pubdate>
          2023年6月27日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          9.8k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          82 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">计算机网络笔记</h1>
            
              <p class="note note-info">
                
                  
                    本文最后更新于：2023年9月7日 上午
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <div class="note note-warning">
            <p>计算机网络复习笔记</p>
          </div> 

<p>访问信息的模型：</p>
<ul>
<li>客户端-服务端(C&#x2F;S)</li>
<li>对等网络模型，没有固定的客户和服务器</li>
</ul>
<p>网络的用途：</p>
<ul>
<li>信息访问</li>
<li>通信</li>
<li>电子商务</li>
<li>娱乐</li>
<li>物联网</li>
</ul>
<p>按空间距离划分：</p>
<ul>
<li>局域网LAN（Local Area Networks），有线LAN和无线LAN，主要采用广播</li>
<li>城域网MAN(Metropolitan)，采用交换</li>
<li>广域网WAN(Wide)，采用交换</li>
<li>个域网PAN</li>
</ul>
<p>局域网中用到的拓扑结构：</p>
<ol>
<li>总线型（总电缆断开，整个网络瘫痪</li>
<li>环型（总电缆断开，整个网络瘫痪</li>
<li>星型</li>
<li>网状</li>
</ol>
<p>通信方式：</p>
<ul>
<li>交换式通信<ul>
<li>经过交换设备转发，关键技术是路由选择，有star,ring, tree, complete等结构</li>
</ul>
</li>
<li>广播式通信<ul>
<li>多台计算机共享通信线路，任一计算机发出的信息可被其他计算机接收，关键技术是通道分配，有bus,ring结构<ul>
<li>通道分配：<ul>
<li>静态分配，分时间片，控制简单，通道利用率低</li>
<li>动态分配，各站点动态使用通道，通道利用率高，控制复杂，有集中式和分布式两种通道分配方法</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>交换（动态的接通或断开通信线路）方式分类：</p>
<ul>
<li>电路交换：实时信息和模拟信号传输<ul>
<li>三个阶段：建立电路（物理电路），传输数据，拆除电路</li>
<li>发送数据前建立点对点物理通路，数据传输延迟小</li>
<li>一般采用时分复用</li>
</ul>
</li>
<li>报文交换（计算机中不使用）：使用于带宽高，可靠灵活，延迟大<ul>
<li>信息以报文（逻辑上完整的信息段）为单位进行存储转发</li>
<li>线路利用率高，中间节点缓冲大，延迟时间长</li>
<li>使用统计复用</li>
</ul>
</li>
<li>分组交换：缩短延迟，满足一般实时信息传送<ul>
<li>比报文小的信息段，可定长也可变长</li>
<li>易于重传，可靠性高，每个分组包括原地址和目的地址；额外信息增加</li>
<li>分为虚电路分组交换和数据包分组交换<ul>
<li>虚电路分组交换：电路交换与分组交换结合，分为建立（逻辑上的电路，选择路由），传输，拆除三个阶段，分组头不需要包含完整的地址信息</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>服务（层间交换信息必须遵守的规则）分类：</p>
<ul>
<li>面向连接的服务，先建立连接，使用连接传输数据</li>
<li>无连接的服务，使用服务传输数据，每个包独立进行路由选择</li>
</ul>
<hr>
<p>服务原语：</p>
<ul>
<li>请求</li>
<li>指示</li>
<li>响应</li>
<li>确认</li>
</ul>
<p>OSI参考模型：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">7.</span> 应用层<br><span class="hljs-bullet">6.</span> 表示层（在5层中包含于应用层），解释交换数据的含义使用户看得懂，包括数据压缩，数据加密，数据描述<br><span class="hljs-bullet">5.</span> 会话层（在5层中包含于应用层），定义数据交换的定界<br><span class="hljs-bullet">4.</span> 传输层（只支持面向连接的通信）<br><span class="hljs-bullet">3.</span> 网络层（支持无连接和面向连接的通信）<br><span class="hljs-bullet">2.</span> 数据链路<br><span class="hljs-bullet">1.</span> 物理层<br></code></pre></td></tr></table></figure>

<p>TCP&#x2F;IP(前身是ARPANET)参考模型：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> Host-to-Network，物理层与数据链路合称<br><span class="hljs-bullet">2.</span> Internet层（网络层，只支持无连接）<br><span class="hljs-bullet">3.</span> 传输层（支持两种通信模式）<br><span class="hljs-bullet">4.</span> 应用层<br></code></pre></td></tr></table></figure>

<ul>
<li>时域观：模拟信号（信号连续且光滑），数字信号（一段时间内是一个恒值，突变为另一个恒值），横轴是时间，</li>
<li>频域管：横轴是频率</li>
</ul>
<hr>
<p>比特率（传输速率，每秒传输二进制的位数）：</p>
<ul>
<li>波特率：信号每秒改变的次数，单位波特（信号在一个给定的等级停留0.001s，系统工作在1000波特）</li>
<li>信号等级：有n个信号等级，则一次可以表示$log_{2}n$个比特<br><code>比特率=波特*log2(信号等级数量)</code></li>
</ul>
<p>计算最大传输速率：</p>
<ol>
<li><p><strong>奈奎斯特定律</strong>：<br>  $f_{max}$是复合信号中的最高频率，采样率&#x3D;$2<em>f_{max}$<br>  任意信号通过一个带宽为H的低通滤波器，每秒采样2H次就可以完整的重现该信号，信号电平分为V级，*<em>最大传输速率</em></em>&#x3D;$2Hlog_{2}(V)$ (bps)</p>
</li>
<li><p><strong>香农定理</strong>：<br>  在奈奎斯特定理基础上考虑随机噪声，用信噪比衡量随机噪声出现的大小（信号功率S与噪声功率N之比）$10log_{10}\frac{S}{N}$，单位分贝，注意区分题目给出的是<strong>S&#x2F;N</strong>还是<strong>、有分贝单位的数值</strong><br>  带宽为H Hz，信噪比为S&#x2F;N的任意信道，<strong>最大数据传输速率</strong>&#x3D;$Hlog_{2}(1+\frac{S}{N})$ (bps)</p>
</li>
</ol>
<p>物理层有关的传输方式：</p>
<ul>
<li>通信方式：<ul>
<li>单工：信息只能单向传输</li>
<li>半双工：信息可双向传输，但同一时刻是单向的</li>
<li>全双工：可同时双向传输</li>
</ul>
</li>
<li>连接方式：<ul>
<li>点对点，点到多点</li>
</ul>
</li>
<li>位传输方式：<ul>
<li>串行，并行</li>
</ul>
</li>
</ul>
<p>物理层的传输介质：</p>
<ul>
<li>双绞线：模拟传输，数字传输均可用</li>
<li>基带同轴电缆：数字传输</li>
<li>宽带同轴电缆：模拟传输</li>
<li>光纤：单模光纤（长距离），多模光纤（短距离）</li>
</ul>
<p>物理层设备：</p>
<ul>
<li>中继器：延长信号传输距离</li>
<li>集线器：类似多接口的转发器，每个接口用非屏蔽双绞线与适配器相连（连接的物理结构不是总线型，而是星型），可采用多集线器的级联结构</li>
</ul>
<hr>
<ul>
<li>同步传输：接收方知道每一位信号的开始及其持续时间</li>
<li>异步传输：</li>
</ul>
<p>使用数字信号</p>
<ul>
<li>优点：价格便宜，对噪声不敏感</li>
<li>缺点：易受衰减，频率越高，衰减越厉害</li>
</ul>
<p>常用的编码方式：</p>
<ol>
<li>不归零制码（Non-Return Zero）：低位表示“0”，高位表示“1”</li>
<li>曼彻斯特编码（相位编码）：每一位中间从低跳高表示“0”，从高跳低表示“1”</li>
<li>差分曼彻斯特码：每一位开始时有跳变表示“0”，无跳变表示“1”</li>
</ol>
<p>数字数据（离散值）的模拟传输三种调制技术：</p>
<ol>
<li>幅移键控法（调幅）(ASK, Amplitude-shift keying)</li>
<li>频移键控法（调频）(FSK, Frequency-shift keying)</li>
<li>相移键控法（调相）(PSK, Phase-shift keying)</li>
</ol>
<p>模拟数据（连续值）的数字传输（解决模拟数据数字化的问题，也称为脉冲代码调制PCM）：</p>
<ol>
<li>脉冲编码调制</li>
<li>$\delta$调制,(缺点：编码速度跟不上变化太快的信号)</li>
</ol>
<p>多路复用技术（信道静态分配）：</p>
<ol>
<li>时分复用（TDM, time division multiplexing）：轮流工作。T1载波1.536MB&#x2F;s，分成24个信道</li>
<li>频分复用（FDM, frequency division multiplexing）：同时使用，通过频率分隔。</li>
<li>波分复用（WDM, wavelength division multiplexing）：光纤中的频分复用</li>
<li>码分复用（CDM, code division multiplexing）：能够提取期望信号（不同语种之间的人交流）</li>
</ol>
<p>（信道动态分配）<br>多路访问协议：</p>
<ul>
<li>ALOHA协议<ul>
<li>纯ALOHA协议：数据发到信道若有冲突等待一段时间（随机的）后重发</li>
<li>分槽ALOHA协议：信道分为离散的时间槽，槽长为一个帧所需的发送时间，其他与纯ALOHA相同</li>
</ul>
</li>
<li>载波监听多路访问协议CSMA（Carrier Sense Multiple Access Protocols）<ul>
<li>在发送之前监听信道有无载波，有则不发；多路访问</li>
<li>1-坚持型CSMA：发送前监听，信道空闲则发，否则监听至信道空闲再发，出现冲突等待一段时间（随机的）再开始发送过程</li>
<li>非坚持型CSMA：发送前监听，信道空闲则发，否则等待一段时间再发，出现冲突等待一段时间（随机的）再开始发送过程。减少冲突概率，信道空闲时间增加</li>
<li>p-坚持型CSMA：适用于分槽信道，发送前监听，信道空闲以概率p发送，1-p延迟到下一时槽，信道忙则等待下一个时间槽，重新开始发送，若冲突等待一段时间（随机的）重新开始</li>
</ul>
</li>
<li>带冲突检测的载波监听多路访问协议CSMA&#x2F;CD<ul>
<li>使用CSMA协议发送数据，站点检测到有冲突就取消传送</li>
</ul>
</li>
<li>无冲突协议<ul>
<li>位图协议（实际发送前先广播发送请求）: 利用率d&#x2F;(d+N)</li>
<li>令牌环协议</li>
<li>二进制下数法：利用率d&#x2F;(d+log2N)</li>
</ul>
</li>
<li>有限竞争协议<ul>
<li>对战分组，组内竞争</li>
<li>适应树搜索协议</li>
</ul>
</li>
<li>无线局域网协议<ul>
<li>只有一个信道，存在隐藏站点问题和暴露站点问题</li>
<li>MACA（Multiple Access with Collision Avoidance）：发送前发送站点与接收站点进行RTS（request to send）与CTS(clear to send)保证各自周围站点在一段时间内不发送数据</li>
<li>MACAW：对MACA进行改进。传输成功的数据帧要产生确认帧；增加发送站的载波监听；若冲突每个数据流执行后退算法；拥塞时站点间交互信息</li>
</ul>
</li>
</ul>
<hr>
<p><strong>数据链路层</strong>（如何在有差错的线路上，进行无差错传输）：从网络层获取数据包（分组）把数据包封装成帧<br>在网络层的分组没有长度限制，确认和重传比较麻烦<br>为网络层提供三种服务：</p>
<ul>
<li>无确认无连接服务，源机器向目标机器发送独立的帧，目标机器不对这些帧确认，适用于实时业务，错误恢复留给上层（不检测丢帧现象）</li>
<li>有确认无连接服务，未使用逻辑连接，发送的每一帧都要单独确认，适用于不可靠的信道（无线系统）</li>
<li>有确认有连接服务，三个阶段建立，传输，释放</li>
</ul>
<p>完成的功能有：</p>
<ul>
<li>向网络层提供接口</li>
<li>处理传输错误</li>
<li>调节数据流（确保慢的一方不会被快速发送的一方淹没）</li>
<li>组帧</li>
</ul>
<p>组帧的方法：</p>
<ul>
<li>字符计数法：计数出错后本帧及之后的帧都有影响（目标方不知道下一帧从哪开始），帧头是整个帧的字符个数（包括自己）</li>
<li>带字符填充的字符定界法：使用标志字节（flag byte）作为起始和结束分界字符，如果在数据中有标志字节，通过字符（字节）填充在之前插入一个转义字符，缺点是依赖于8位字符</li>
<li>带位填充的标记定界法：转换密度小，USB采用该方法，一帧的长度取决于数据内容</li>
<li>物理层编码违例法：适用于物理层编码有冗余的网络，容易找到帧的开始和结束，不需要填充数据</li>
</ul>
<hr>
<p>差错出现的特点：随机，连续突发<br>处理方法：</p>
<ul>
<li>纠错码：在数据块中添加冗余信息使得接收方能够判断数据是否有错，并<strong>纠正错误</strong><ul>
<li>海明距离（两个码字之间不同的对应比特位数目,0000000000与0000011111的海明距离为5）</li>
<li>广泛应用于无线链路</li>
</ul>
</li>
<li>检错码：在数据块中添加冗余信息使得接收方能够判断数据是否有错，但<strong>不能判断错在哪</strong>，纠错码适用于无法重传的情况<ul>
<li>循环冗余校验码（CRC，Cyclic Redundancy Check）：发送T(x)，接收<code>T(x)+E(x)</code>,<code>E(x)≠0</code>（生成多项式G(x)事先约定好），若<code>(T(x)+E(x))%G(x)=0</code>（由于T(x)&#x2F;G(x)一般是0，所以只需要看E(x)&#x2F;G(x)是否为0）不会发现差错，否则可发现（有四个国际标准<em>生成多项式</em>）</li>
<li>CRC的详细过程：<ul>
<li>假设：生成多项式为G(x)，r次冪 (即r+1位)；信息多项式M(x)</li>
<li>发送端：在帧的低位端加上r个0位，传送 $T(x)&#x3D;M(x)x^{r} – R(x)$ ，其中R(x)为 $x^{r}M(x)&#x2F;G(x)$ 的余数</li>
</ul>
</li>
<li>铜线和光纤上应用</li>
</ul>
</li>
</ul>
<p>注：加减法等同于异或</p>
<hr>
<p>物理层与数据链路层在个特殊的IO电路中的一个处理器上运行，网络层在主CPU上运行</p>
<p>滑动窗口协议：捎带（延迟待发确认，与下一个待发数据帧一起发送），可在实际环境下工作，可以充分利用信道带宽，但等待时间的确认复杂。在接收到确认之前窗口大小不变。<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/482716790">参考资料</a></p>
<ul>
<li>一比特滑动窗口协议（<strong>停等</strong>协议）：窗口大小为1，传输效率低<ul>
<li>信道带宽<code>b</code>比特&#x2F;s，帧长度<code>L</code>比特，往返传输延迟<code>R</code>秒则利用率为$\frac{L&#x2F;b}{L&#x2F;b+R}$，采用管道化技术发送多帧后再等待确认，但误码率将升高</li>
</ul>
</li>
<li><strong>退后n帧</strong>重传（go back n）：接收窗口大小为1，发送窗口为n，如果之前的确认失败，将不动等待超时，但会造成不必要的重传，发送窗口尺寸&lt;序号个数，累计确认只要发送了3，表示123三个序号都已确认</li>
<li><strong>选择重传</strong>（SR）：无不必要的重传，接收端需要缓冲区。发送窗口&lt;&#x3D;接收窗口，接收窗口的最大值（maxseq+1）&#x2F;2；发送窗口&gt;接收窗口时，发送窗口+接收窗口&lt;&#x3D;序号个数，不具有累计确认的作用</li>
</ul>
<p>常用的数据链路层协议</p>
<ul>
<li>级数据链路控制规程，HDLC（High Level Data Link Control）<ul>
<li>帧类型：信息帧，监控帧，无序号帧</li>
</ul>
</li>
<li>X.25 LAP(Link Access Procedure),LAPB(Balanced)是HDLC的子集，面向比特</li>
<li>PPP（Point to Point），面向字节，完善了SLIP协议，包括LCP（链路控制协议，Link Control Protocol）和NCP（网络控制协议，Network Control Protocol）（包含了物理层和网络层内容）</li>
</ul>
<p>LLC逻辑链路控制子层(Logical link Control)：为网络层提供接口<br>MAC介质访问控制子层(Medium Access Control)：与传输介质有关的内容放在MAC层</p>
<p>二进制指数后退算法：</p>
<ul>
<li>冲突后的时间划分为51.2微秒的时槽</li>
<li>第i次冲突，i&lt;&#x3D;10时，在[0, $2^{i}-1$]间随机选择一个等待时间槽数再开始重传；i&gt;10后在[0, $2^{10}-1$]间随机选择一个等待时间槽数再开始重传</li>
<li>16次冲突后发送失败，报告上层</li>
</ul>
<p>802.3基带系统都使用曼彻斯特编码<br>IEEE 802.3</p>
<ul>
<li>目标和源地址字段6字节</li>
<li>帧长度域2字节</li>
<li>数据0-1500字节</li>
<li>填充0-46字节</li>
<li>校验和CRC校验4字节</li>
</ul>
<p>万兆以太网</p>
<ul>
<li>10GE不使用CSMA&#x2F;CD协议只工作在全双工方式，不使用铜线只使用光纤作为传输介质</li>
</ul>
<p>802.11</p>
<ul>
<li>未采用CSMA&#x2F;CD协议，支持DCF(Distributed Coordination Function，分布式协调功能)和PCF(Point Coordination Function，点协调功能)</li>
</ul>
<p>网桥技术：工作在数据链路层的一个网络互连设备，在互连的LAN间实现帧的存储和转发，也称为交换机</p>
<ul>
<li>网桥混杂方式工作（接收所有帧），地址&#x2F;端口表为空时，使用洪泛方式转发帧（全部转发），转发过程中使用逆向学习算法收集MAC地址（分析<strong>源MAC地址</strong>得到MAC地址与端口对应关系写入地址&#x2F;端口表）；定时更新</li>
<li>帧的路由过程：目的LAN与源LAN相同，丢弃帧；不同，转发；目的LAN未知，洪泛</li>
<li>多个网可能产生回路：使用生成树</li>
</ul>
<p>VLAN</p>
<hr>
<p>网络层为传输层提供的服务：</p>
<ul>
<li>面向连接的服务：将复杂的功能放在网络层</li>
<li>无连接服务：复杂的功能在传输层实现</li>
</ul>
<p>网络层的内部结构: </p>
<ul>
<li>数据报子网：独立转发，不一定按次序</li>
<li>虚电路子网：建立虚电路，按次序转发</li>
</ul>
<p>路由算法：</p>
<ul>
<li>静态路由算法（非自适应）<ul>
<li>洪泛算法：将收到的每一个分组向除到来的线路外的所有输出线路转发，可能产生回路</li>
<li>选择性洪泛算法：对洪泛算法的改进，将收到的分组发给与正确方向接近的线路（过于浪费路由器和线路资源）</li>
<li>基于流量的路由算法：考虑拓扑结构兼顾网络负载，根据网络带宽和平均流量得到平均分组延迟，找产生网络最小延迟的路由选择算法（要求节点间数据流相对稳定和可预测）</li>
</ul>
</li>
<li>动态路由算法（自适应）<ul>
<li>距离向量路由算法（Distance Vector也称Bellman-Ford 或者Ford-Fulkerson算法）：每个路由器维护一张表，通过与相邻路由器交换距离信息更新表。对好消息反应迅速，对坏消息（有路由器掉线）反应迟钝。收敛速度慢，存在无穷计算问题，不适用大规模网络。可理解为将全网信息发给邻居</li>
<li>水平分裂算法：与距离向量算法相同，到X的距离不向真正通向X的邻居结点报告，使坏消息传播变快（但有时也会失效）</li>
<li>链路状态路由算法(Link State Routing)：将邻居的状态分组发给全网，使用Dijkstra算法计算最短路径。存在路由振荡问题。使用洪泛将分组信息发给其他所有路由；LS发布增量信息（有改变时发送，与DV不同）</li>
</ul>
</li>
</ul>
<p>RIP协议：</p>
<ul>
<li>采用距离向量算法，距离的衡量采用<strong>跳数</strong>(max &#x3D; 15hops)，距离向量每30秒交换一次</li>
<li>故障处理：180秒（6个周期）内未收到来自邻居的路由声明，则认为邻居失效，经过该邻居的路由无效，新的路由声明发给其他邻居，将链路失效的信息传播到全网</li>
<li>不可靠传输（UDP）</li>
</ul>
<p>OSPF协议，开放最短路径优先算法OSPF(Open Shortest Path First)：</p>
<ul>
<li>采用LS算法</li>
<li>支持各种距离度量，包括物理距离，延迟</li>
<li>洪泛方法向其他路由发送路由信息</li>
<li>当路由信息改变时向其他路由器发送信息</li>
</ul>
<p>BGP协议：</p>
<ul>
<li>采用路径矢量算法（与DV算法类似）</li>
<li>TCP</li>
</ul>
<table>
<thead>
<tr>
<th>主要特点</th>
<th>RIP</th>
<th>OSPF</th>
<th>BGP</th>
</tr>
</thead>
<tbody><tr>
<td>网关协议</td>
<td>内部</td>
<td>内部</td>
<td>外部</td>
</tr>
<tr>
<td>最优通路依据</td>
<td>跳数</td>
<td>费用</td>
<td>多种策略</td>
</tr>
<tr>
<td>算法</td>
<td>DV</td>
<td>LS</td>
<td>PV(路径矢量)</td>
</tr>
<tr>
<td>传输方式</td>
<td>运输层UDP</td>
<td>IP数据报</td>
<td>建立TCP连接</td>
</tr>
<tr>
<td>其他</td>
<td>简单；效率低；跳数为16不可达；</td>
<td>效率高；路由器频繁交换信息；规模大</td>
<td></td>
</tr>
</tbody></table>
<p>因特网由大量自治系统（AS）组成</p>
<ul>
<li>AS内部的路由算法称为内部网关协议（最初使用RIP，目前主要使用OSPF）；AS之间的为外部网关协议</li>
</ul>
<p>分层路由：</p>
<ul>
<li>网络规模增大导致路由收敛很慢</li>
<li>分层后计算出的路由不一定是最优路由</li>
</ul>
<p>分片：</p>
<ul>
<li>每种网络对最大分组长度有限制</li>
<li>分片重组策略：对其他网络透明&#x2F;不透明</li>
<li>标记片段：树型标记法（标记域要足够长），偏移量法</li>
</ul>
<p>IP协议：</p>
<ul>
<li>IP头包含<strong>20个字节的固定部分</strong>和变长的可选部分，从左到右传输</li>
<li>IP头有：Total Length（数据包总长度，包括头部和数据）, Identification（分片标记，标记分片属于哪一个数据报）, DF（不可分片标识）, MF（更多分片标识，除了最后一篇为0，其余分片均为1）, Offset（该分片在整体消息上的位置，以8字节为划分单位）等</li>
<li>IP地址（32位）：有类地址划分ABCDE五种；全0标识本网络；全1表示广播地址</li>
</ul>
<p>ARP协议（地址解析协议Address Resolution Protocol）：</p>
<ul>
<li>解决网络层地址（IP）与数据链路层地址（MAC）的映射</li>
<li>建立ARP表（存放IP，MAC地址对）</li>
<li>四种情况：<ul>
<li>主机H1发给同网络下的主机H2。H1发送ARP分组（在网络中广播），找到目的主机H2的硬件地址</li>
<li>主机H1发给不同网络下的主机H2。H1发送ARP请求分组，找到H1所在网络下的路由器R1的硬件地址，剩下的交给R1完成</li>
<li>路由器R1发给同一网络下的主机H3。R1发送ARP请求分组（在网2下广播），找到H3的硬件地址</li>
<li>路由器R1发给另一网络下的主机H4。R1发ARP请求分组（在网2下广播）找到连接网2的路由器R2的硬件地址，剩下交给R2</li>
</ul>
</li>
</ul>
<p>无类域间路由CIDR（Classless InterDomain Routing）</p>
<ul>
<li>将剩余的C类地址分为大小可变的地址空间</li>
<li>在路由表中增加32位的掩码域</li>
</ul>
<p>ICMP协议（互联网控制消息协议，Internet Control Message Protocol）：</p>
<ul>
<li>报告错误和测试，ICMP报文封装在IP分组中</li>
<li>报文种类<ul>
<li>差错报告报文</li>
<li>询问报文</li>
</ul>
</li>
<li>对有特殊地址的数据报，不发送ICMP差错报告报文</li>
</ul>
<p>当一台计算机需要和另一台计算机通讯时，计算机需要根据 本机子网掩码和目标IP地址 计算出目标IP所在的网段，然后再根据 本机IP 和 本机的子网掩码 得出本机所在的网段。如果两个网段相同，那么两台计算机是局域网，然后则开始通信；如果不同，也就意味着目标IP是一个远程地址，这时候本机会把数据发送给默认网关，然后默认网关处理接下来的通信。</p>
<p>IPv6与IPv4</p>
<ul>
<li>地址由32位变为128位</li>
<li>IP头简化，由13个域变为7个域</li>
</ul>
<p>IPv6表示方法：<br>用’:’分割为8组，每组4个16进制</p>
<p>帧头  IP头  TCP消息（数据和头）</p>
<p>NAT网络地址转化(Network Address Translation)</p>
<ul>
<li>为每个公司分配一个IP地址，内部流量传输使用唯一IP地址，向外部传输时进行地址转换（根据源IP和源端口进行转换）</li>
</ul>
<p>SDN（软件定义网络，SoftwareDefined Networking）</p>
<ul>
<li>控制平面：选择路径和决定如何处理转发流量的软件和逻辑</li>
<li>数据平面：以硬件为基础的技术，它负责对数据包执行实际的查找工作，以及决定如何处理这些数据包</li>
<li>控制平面运行在软件中, 在操作上可以与数据平面完全分离</li>
</ul>
<hr>
<p>传输层（为消除网络层的不可靠性引入）<br>网络层寻址：IP地址<br>传输层寻址：IP地址+端口号</p>
<p>传输服务原语：</p>
<ul>
<li>Listen：阻塞，直到某个进程与之连接</li>
<li>Connect：主动尝试建立一个连接</li>
<li>Send：发送信息</li>
<li>Receive：阻塞，直到有一个Data数据包到达</li>
<li>Disconnect：请求释放连接</li>
</ul>
<p>帧头包含包头包含段头</p>
<p>TCP连接管理</p>
<ul>
<li>三次握手建立连接。客户发起SYN&#x3D;1, seq&#x3D;x的请求；服务器回应SYN&#x3D;1，ACK&#x3D;1, seq&#x3D;y, ack&#x3D;x+1；客户回应ACK&#x3D;1,seq&#x3D;x+1,ack&#x3D;y+1。第三次时可以发送具体的报文</li>
<li>四次挥手释放连接。客户发起FIN&#x3D;1, seq&#x3D;u请求；服务器回应ACK&#x3D;1, seq&#x3D;v,ack&#x3D;u+1；服务器发起FIN&#x3D;1,ACK&#x3D;1,seq&#x3D;w（有数据传传送导致序号不一定连续）,ack&#x3D;u+1；客户回应ACK&#x3D;1,seq&#x3D;u+1,ack&#x3D;w+1</li>
<li>不支持组播和广播</li>
<li>TCP头内容<ul>
<li>源端口号和目的端口号：各16位</li>
<li>序号和确认号：以字节为单位编号，各32位</li>
<li>4位TCP头的长度：表示TCP头部有多少个32位字（最大标识15，即TCP头部最长60字节）</li>
<li>6位标志位：置1表示有效<ul>
<li>URG：表示紧急指针是否有效</li>
<li>ACK：确认号是否有效</li>
<li>PSH：指示发送方和接收方将数据不做缓存，立刻发送或接收</li>
<li>RST：由于不可恢复的错误重置连接</li>
<li>SYN：用于连接建立指示</li>
<li>FIN：用于连接释放指示</li>
</ul>
</li>
<li>16位窗口大小</li>
<li>16位校验和</li>
<li>16位紧急指针</li>
</ul>
</li>
<li>TCP按字节分配序号</li>
</ul>
<p>缓存：</p>
<ul>
<li>固定大小缓存</li>
<li>可变大小缓存</li>
<li>大循环缓冲区</li>
</ul>
<p>TCP拥塞控制</p>
<ul>
<li>快网络小缓存接收者<ul>
<li>建立连接时声明最大可接收段长度</li>
</ul>
</li>
<li>慢网络大缓存接收者<ul>
<li>发送方维护可变发送窗口和拥塞窗口（慢启动和拥塞避免算法变化）</li>
<li>慢启动算法：初始值为连接允许的最大发送段长MSS，并设置阈值，发出一个最大段长的TCP段，收到正确确认，拥塞窗口变为两个最大段长，再发出（拥塞窗口&#x2F;最大段长）个最大长度的TCP段，都确认后拥塞窗口再加倍（该加倍的过程中每收到一个拥塞窗口增长一次），重复上述，直到超时或大于阈值</li>
<li>拥塞避免算法：拥塞窗口大于阈值时，拥塞窗口开始线性增长，一个RTT周期增加一个最大段长，直到发生超时后，阈值设置为当前拥塞窗口的一半，拥塞窗口重新设置为一个最大段长（快恢复中拥塞窗口设置为与阈值相同），执行慢启动算法</li>
<li>选择确认：</li>
</ul>
</li>
</ul>
<p>UDP协议：</p>
<ul>
<li>不需要建立连接</li>
<li>无连接，不可靠的</li>
<li>RIP，DNS，SNMP使用UDP</li>
</ul>
<hr>
<p>应用层</p>
<p>客户&#x2F;服务器模型（C&#x2F;S模型）：客户发出请求，服务器给出响应</p>
<p>P2P模型：非集中式结构</p>
<p><strong>域名系统DNS</strong>：</p>
<ul>
<li>典型的客户&#x2F;服务器交互系统</li>
<li>使用分布式数据库实现该命名机制，<strong>大小写无关</strong>，最长255字符，每部分最长65字符</li>
<li>资源记录五元式：Domain_name, Time_to_live, Class, Type, Value</li>
<li>DNS查询过程，从本地域名服务器开始：<ul>
<li>迭代查询：类似于逐一查询</li>
<li>递归查询：一路查到底才返回结果</li>
</ul>
</li>
<li>DNS缓存：存放最近查询过的域名</li>
<li>一个域名可以对应多个IP，一个IP也可以对应多个域名<br>简单网络管理SNMP：</li>
<li>五个功能：性能管理，故障管理，配置管理，记账管理和安全管理</li>
<li>基于UDP</li>
</ul>
<p>电子邮件发送方发送使用简单邮件传输协议SMTP（Simple Mail Transfer Protocol），接收方从接收服务器上拉取邮件使用POP3协议或IMAP。通用互联网邮件扩充MIME，定义传送非ASCII码的编码规则（方便传输音视频等）</p>
<p>WWW（World Wide Web）：</p>
<ul>
<li>统一资源定位符URL（Uniform Resource Locator）：<code>&lt;协议&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;</code></li>
</ul>
<p>HTTP超文本传输协议：无状态，不保存客户信息。</p>
<ul>
<li>非持久连接：HTTP&#x2F;1.0每个对象的取得需要2个RTT，服务器发出响应后关闭连接</li>
<li>持久连接：HTTP&#x2F;1.1默认持久，同一个TCP连接上解析请求，响应，再解析请求，响应<ul>
<li>流水线方式，客户收到HTTP的响应报文之前能接着发送新的请求报文，访问所有对象只需要1个RTT</li>
<li>非流水线方式，客户收到前一个响应后才能发送新的报文</li>
</ul>
</li>
<li>HTTP协议本身是无连接的</li>
</ul>
<p>FTP（文件传输协议）</p>
<ul>
<li>数据连接可以双向使用</li>
<li>数据连接在每次数据传输结束关闭</li>
<li>TCP21端口建立控制连接</li>
<li>TCP20或其他端口建立数据连接</li>
<li>控制连接采用telnet</li>
</ul>
<p>应用层常用服务</p>
<table>
<thead>
<tr>
<th>服务</th>
<th>TCP&#x2F;UDP</th>
<th>端口号</th>
</tr>
</thead>
<tbody><tr>
<td>POP3</td>
<td>TCP</td>
<td>110</td>
</tr>
<tr>
<td>IMAP</td>
<td>TCP</td>
<td>143</td>
</tr>
<tr>
<td>SMTP</td>
<td>TCP</td>
<td>25</td>
</tr>
<tr>
<td>Talnet</td>
<td>TCP</td>
<td>23</td>
</tr>
<tr>
<td>HTTP</td>
<td>TCP</td>
<td>80</td>
</tr>
<tr>
<td>HTTPS</td>
<td>TCP</td>
<td>443</td>
</tr>
<tr>
<td>FTP</td>
<td>TCP</td>
<td>20&#x2F;21</td>
</tr>
<tr>
<td>DHCP</td>
<td>UDP</td>
<td>67</td>
</tr>
<tr>
<td>DNS</td>
<td>TCP&#x2F;UDP</td>
<td>53</td>
</tr>
<tr>
<td>SNMP</td>
<td>UDP</td>
<td>161</td>
</tr>
</tbody></table>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/learning-notes/" class="category-chain-item">learning-notes</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/markdown/">#markdown</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>计算机网络笔记</div>
      <div>https://danmoliuhen.github.io./2023/06/27/计算机网络笔记/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>YeBao</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年6月27日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <span>CaiYe</span> <i class="iconfont icon-love"></i> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
